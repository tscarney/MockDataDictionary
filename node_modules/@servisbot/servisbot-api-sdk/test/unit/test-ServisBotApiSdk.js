const assert = require('assert');
const ServisBotApiSdk = require('../../src/ServisBotApiSdk');

describe('ServisBOT API SDK', () => {
  it('should initialise the SDK', () => ServisBotApiSdk(null, Promise).init('http://apiurl.com', 'api-key')
    .catch(() => {
      assert.ok(false, 'There should have been no errors');
    }));

  it('should error out when url and api key are not passed on intialisation', () => {
    const api = ServisBotApiSdk(null, Promise);

    return api.init(undefined, undefined)
      .then(() => assert.fail('Promise should have rejected'))
      .catch((e) => {
        assert.ok(
          e.message.includes('not valid'),
          'Error message should mention the invalidity of the url and api key'
        );
      });
  });
});
