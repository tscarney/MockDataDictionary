# Code examples

### Create a conversation

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const endpoint = "<R2 Endpoint>";
const customerReference = "<Customer Reference>";
const context = {}; /* Optional */
const options = {}; /* Optional */

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.createConversation(
      endpoint, customerReference, context, {}
    );
  })
  .then((conversation) => {
    console.log(conversation);
    /*
      {
        ConversationId: <Conversation ID>
      }
    */
  });
```

### Get a Conversation by Conversation ID

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const conversationId = "<Conversation ID>";

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.getConversationById(conversationId)
  })
  .then((conversation) => {
    console.log(conversation);
    /*
      {
        ConversationId: <Conversation ID>,
        CustomerReference: <Customer Reference>
        Context: {
          keyA: "keyA",
          botId: <Bot ID>
        }
      }
    */
  });
```

### Get a Conversation By Customer Reference

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const customerReference = "<Customer Reference>";

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.getConversationByCustomerReference(
      conversationId
    );
  })
  .then((conversation) => {
    console.log(conversation);
    /*
      {
        ConversationId: <Conversation ID>,
        CustomerReference: <Customer Reference>
        Context: {
          keyA: "keyA",
          botId: <Bot ID>
        }
      }
    */
  });
```

### Update Conversation

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const conversationId = "<Conversation ID>";
const context = {      /* optional */
  addingNewKey: "someNewValue",
  replacingExistingKey: "thisWillReplaceExistingValue"
}
const state = "PAUSE"; /* optional */

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.updateConversation(
      conversationId, context, state
    );
  })
  .then(() => {
    console.log('Conversation Updated');
  });
```

### Delete Conversation

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const conversationId = "<Conversation ID>";

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.deleteConversation(conversationId);
  })
  .then(() => {
    console.log('Conversation Deleted');
  });
```


### Get Conversation Details

```js
const ServisBotSdk = require('@servisbot/servisbot-api-sdk');

const url = "<The URL where the API is deployed>";
const apiKey = "<Your API key>";
const conversationId = "<Conversation ID>";
const identity = "<identity>";

ServisBotSdk.init(url, apiKey)
  .then(() => {
    return ServisBotSdk.BotArmyRuntime.getConversationDetails(conversationId, identity);
  })
  .then(res => {
    console.log(res);
    //  { context: {}, messages: [] }
  });
```
